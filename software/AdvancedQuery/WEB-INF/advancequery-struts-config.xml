<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE struts-config
PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
"http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">

<struts-config>
	
	<form-beans>
		<!--Query-->		
		<form-bean name="categorySearchForm" type="edu.wustl.query.actionforms.CategorySearchForm"/>
		<form-bean name="advanceSearchForm" type="edu.wustl.query.actionforms.AdvanceSearchForm"/>  
		<form-bean name="saveQueryForm" type="edu.wustl.query.actionforms.SaveQueryForm"/>
		<form-bean name="workflowForm" type="edu.wustl.query.actionforms.WorkflowForm"/>		
		<form-bean name="showRetrieveRecentForm" type="edu.wustl.query.actionforms.ShowRetrieveRecentForm"/>		
				
	</form-beans>
	
	<!-- Global Exception Definitions Removed, will use global definitions in CIDER's struts-config.xml
	<global-exceptions>
		<exception
			type="edu.wustl.common.exception.UserNotAuthenticatedException"
			key="" scope="request" path=".query.redirectToLoginPageDef" />
		<exception
			handler="edu.wustl.cider.util.CiderExceptionHandler"
			key="" scope="request" type="java.lang.Exception"
			path=".query.errorPageDef" />
	</global-exceptions>  -->
	
	<action-mappings>
	
		
		<action path="/Home"
					type="edu.wustl.query.action.ForwardAction">
		 			<forward name="success" path=".query.homePageDef" /> 
		</action>
		
		<action path="/Forward"
					type="org.apache.struts.actions.ForwardAction"
					parameter=".terms.andConditions" />
		
		<action path="/QueryHome"
					type="org.apache.struts.actions.ForwardAction"
					parameter=".query.mainTitlePageDef" />
		
		<action path="/Search"
					type="edu.wustl.query.action.ForwardAction">
					<forward name="success" path=".query.searchHomeDef" />
		</action>
		
		<action path="/ContactUs" type="edu.wustl.common.action.ApplicationFooterAction">
            <forward name="success" path=".query.contactUsDef"/>
            <forward name="failure" path=".query.errorPageDef"/>
		</action>

		<action path="/Accessibility" type="edu.wustl.common.action.ApplicationFooterAction">
            <forward name="success" path=".query.accessibilityDef"/>
            <forward name="failure" path=".query.errorPageDef"/>
		</action>

		<action path="/Disclaimer" type="edu.wustl.common.action.ApplicationFooterAction">
            <forward name="success" path=".query.disclaimerDef"/>
            <forward name="failure" path=".query.errorPageDef"/>
		</action>
		
		<action path="/PrivacyNotice" type="edu.wustl.common.action.ApplicationFooterAction">
            <forward name="success" path=".query.privacyNoticeDef"/>
            <forward name="failure" path=".query.errorPageDef"/>
		</action>
		
        <action path="/Summary" type="edu.wustl.query.action.SummaryAction" name="summaryForm">
        	<forward name="success" path=".query.summaryHomeDef" />
            <forward name="failure" path=".query.homePageDef" />
		</action>
				
        <action path="/Help" type="org.apache.struts.actions.ForwardAction"
                    parameter=".query.helpHomeDef" />
                    
		<action path="/LoggedInSummary" type="edu.wustl.query.action.SummaryAction">
        	<forward name="success" path=".query.summaryLoggedInDef" />
            <forward name="failure" path=".query.homePageDef" />
		 </action>

         <action path="/LoggedInHelp"
                    type="org.apache.struts.actions.ForwardAction"
                    parameter=".query.helpLoggedInDef" />
                   
        <action path="/RedirectToHelp"  type="edu.wustl.query.action.RedirectToHelpAction" >
        	<forward name="success" path=".query.RedirectToHelp" />
        </action> 
        
        <!--Suite-->	
			
		
	<!--Added by Deepti -define array end-->
	<!-- Action code : Query Module Starts : 06/11/06 -->
		<action path="/QueryWizard"
			type="edu.wustl.query.action.QueryWizardAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.searchCategory"/>
		</action>
		
		<action path="/QueryGetCount"
			type="edu.wustl.query.action.QueryGetCountAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.getCount"/>
		</action>
		
	    <action path="/GetCountPopUp"
          type = "edu.wustl.query.action.GetCountPopUpAction"
          name="categorySearchForm"
          validate="false"
		  scope="request">
            <forward name="success"  path="/pages/advancequery/content/search/querysuite/GetCountPopUp.jsp" />
        </action>
        <action path="/BuildQueryOutputTreeAjaxHandler"
			type="edu.wustl.query.action.BuildQueryOuputTreeAjaxHandlerAction"
			validate="false"
			scope="request">
		</action> 
		 <action path="/ShowGridAjaxHandler"
			type="edu.wustl.query.action.ShowGridAjaxHandlerAction"
			validate="false"
			scope="request">
		</action> 
        <action path="/GetCountAjaxHandler"
			type="edu.wustl.query.action.GetCountAjaxHandlerAction"
			validate="false"
			scope="request">
		</action>
		
		<action path="/SearchCategory"
			type="edu.wustl.query.action.CategorySearchAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.searchCategory"/>
			<forward name="CountQuery" path=".query.getCount"/>
			<forward name="DataQuery" path=".query.searchCategory"/>
		</action>
		
		<action path="/ValidateQuery"
			type="edu.wustl.query.action.ValidateQueryAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
		    <forward name="success" path=".query.searchCategory"/>
		</action>
		
		<action path="/DefineView"
			type="edu.wustl.query.action.DefineViewAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path="/LoadSaveQueryPage.do"/>
		</action>
		<action path="/ValidateDefineView"
			type="edu.wustl.query.action.ValidateDefineViewAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
		    <forward name="success" path=".query.searchCategory"/>
		</action>
		<action path="/LoadSaveQueryPage"
            type="edu.wustl.query.action.LoadSaveQueryPageAction"
            name="saveQueryForm"
            validate="false"
            scope="request">
            <forward name="success" path=".query.saveQuery"/>
        </action>
        <action path="/SaveQueryAction"
			type="edu.wustl.query.action.SaveQueryAction"
			name="saveQueryForm"
			validate="true"
			input="/LoadSaveQueryPage.do"
			scope="request">
			<forward name="success" path="/LoadSaveQueryPage.do"/>
			<forward name="failure" path="/LoadSaveQueryPage.do"/>
			<forward name="workflow" path="/RedirectToWorkflow.do"/>
			<forward name="showdashboard" path="/ShowDashboard.do?requestFrom=MyQueries"/>
		</action>
		<action path="/RetrieveQueryAction"
			type="edu.wustl.query.action.RetrieveQueryAction"
			name="saveQueryForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.queryViewPageDef"/>
			<forward name="failure" path=".query.errorPageDef"/>
			
			<forward name="MyQueries" path=".query.querySavedQueryListDef"/>
			<forward name="sharedQueries" path=".query.querySavedQueryListDef"/>
			
			<forward name="myQueriesForMainMenu" path=".query.savedQueryListDeftile"/>
			<forward name="sharedQueriesForMainMenu" path=".query.savedQueryListDeftile"/>

			<!--  for popup-->
			<forward name="myQueriesForWorkFlow" path=".query.queryWorkFlowPopup"/>
			<forward name="sharedQueriesForWorkFlow" path=".query.queryWorkFlowPopup"/>
			
		</action>
	
		<action path="/DeleteQuery"
			type="edu.wustl.query.action.DeleteQueryAction"
			validate="false"
			scope="request">
			<forward name="success" path="/RetrieveQueryAction.do"/>
			<forward name="failure" path="/RetrieveQueryAction.do"/>
		</action>
		<action path="/FetchQuery"
			type="edu.wustl.query.action.FetchQueryAction"
			name="saveQueryForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.collectQueryParameter"/>
			<forward name="failure" path="/RetrieveQueryAction.do"/>
			<forward name="executeQuery" path="/ExecuteQueryAction.do"/>
			<forward name="editDataQuery" path="/SearchCategory.do" />
			<forward name="editCountQuery" path="/QueryGetCount.do" />
		</action>
		<action path="/loadDefineSearchRules"
			type="edu.wustl.query.action.LoadDefineSearchRulesAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.searchCategory"/>
		</action>
		<action path="/ViewSearchResultsJSPAction"
			type="edu.wustl.query.action.ViewSearchResultsJSPAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.viewSearchResults"/>
			<forward name="failure" path=".query.errorPageDef"/>
	
		</action>
		<action path="/DefineSearchResultsView"
			type="edu.wustl.query.action.DefineSearchResultsViewAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.defineSearchResultsView"/>
			<forward name="BuildNewTree" path=".query.defineSearchResultsViewBNT"/>
		</action>
		
		<action path="/BuildCustomizeTree"
			type="edu.wustl.query.action.querysuite.BuildCustomizeTreeAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.defineSearchResultsViewBNT"/>			
		</action>
		<action path="/BuildQueryOutputTree"
			type="edu.wustl.query.action.BuildQueryOutputTreeAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.defineSearchResultsViewBNT"/>			
		</action>
		<action path="/ShowGrid"
			type="edu.wustl.query.action.ShowGridAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.queryResultsSpreadsheetViewDef" />
			<forward name="failure" path="/pages/content/search/querysuite/UserNotAuthorised.jsp"/>
		</action>
		<action path="/BuildQueryOutputSpreadsheet"
			type="edu.wustl.query.action.querysuite.BuildQueryOutputSpreadsheetAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.defineSearchResultsViewBNT"/>			
		</action>
		<action path="/LoadingVocabularies"
			type="edu.wustl.query.action.LoadingVocabulariesAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path="/pages/advancequery/content/search/LoadingVocabularies.jsp"/>
		</action>
		<action path="/SearchPermissibleValues"
			type="edu.wustl.query.action.SearchPermissibleValuesAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path="/pages/advancequery/content/search/VocabularyInterface.jsp"/>
		</action>
		<action path="/SearchMappedPV"
			type="edu.wustl.query.action.SearchMappedPVsAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path="/pages/advancequery/content/search/VocabularyInterface.jsp"/>
		</action>
		<action path="/ShowVITooltip"
			type="edu.wustl.query.action.ShowVITooltipAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path="/pages/advancequery/content/search/VocabularyInterface.jsp"/>
		</action>
		<action path="/SelectedPermissibleValue"
			type="edu.wustl.query.action.SelectedPermissibleValueAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path="/pages/advancequery/content/search/Refresh.jsp"/>
		</action>		
	
		<action path="/QueryMessageAction"
			type="edu.wustl.query.action.QueryMessageAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.searchCategory"/>
		</action>
		
    		
		<!-- Action code : Query Module changes for pagination starts : 20/07/2007 -->
		
		<action path="/QueryTreeView"
			type="edu.wustl.query.action.QueryTreeViewAction">
			<forward name="success" path=".query.queryTreeViewDef" />
		</action>	
		<!-- Action code : Query Module changes for pagination ends : 20/07/2007 -->		
		
		<!-- Action code : Query Module Ends : 06/11/06 -->	

	   <action path="/ComboDataAction" type="edu.wustl.query.action.ComboDataAction" scope="request"/>
	   
	   <action path="/QueryAction"
          type = "edu.wustl.query.action.QueryAction">
            <forward name="success"  path="/RetrieveQueryAction.do" />
        </action>
	   
	  
	   <!--  To Do  change the action  class name --> 
        <action path="/QueryWorkflowWizard" 
        		type="edu.wustl.query.action.WorkflowAction"
        		name="workflowForm" 
        		validate="false"
				scope="request">
        	<forward name="success" path=".query.queryWorkFlowWizardDef"/>
        	<forward name="failure" path="/QueryWorkflowWizard.do"/>
        </action>
        
          <action path="/QueryWorkflowWizardOld" 
        		type="edu.wustl.query.action.WorkflowAction"
        		name="workflowForm" 
        		validate="false"
				scope="request">
        	<forward name="success" path=".query.queryWorkFlowWizardDefOld"/>
        	<forward name="failure" path="/QueryWorkflowWizard.do"/>
        </action>
         <action path="/Workflow"
             type="org.apache.struts.actions.ForwardAction"
             parameter=".query.redirectToWorkflowPageDef"/> 
        
        <action path="/SaveWorkflow"  
        		type="edu.wustl.common.action.CommonAddEditAction" 
        		name="workflowForm"
        		validate="false"
				scope="request">
		   	<forward name="success" path="/SearchWorkflow.do?operation=search&amp;pageOf=pageOfWorkflow"/>
	      	<forward name="failure" path="/QueryWorkflowWizard.do"/>
	      	<forward name="loadQueryPage" path="/LoadQueryPage.do"/>
        </action>
                 
        <action path="/SearchWorkflow"  
        		type="edu.wustl.query.action.SearchWorkflowAction" 
        		name="workflowForm"
        		validate="false"
				scope="request">
		   	<forward name="success" path="/WorkflowSearchAuthorized.do?pageOf=pageOfWorkflow"/>
	       	<forward name="failure" path="/QueryWorkflowWizard.do"/>
        </action>
        
        
        
        
        <action path="/WorkflowAjaxHandler" 
        type="edu.wustl.query.action.WorkflowAjaxHandlerAction"
        validate="false"
		scope="request">
        </action>
        
    	<action path="/ProjectChangeAjaxHandler" 
        type="edu.wustl.query.action.ProjectChangeHandlerAction"
        validate="false"
		scope="request">
        </action>
        
        <action path="/SaveWorkflowAjaxHandler" 
        type="edu.wustl.query.action.SaveWorkflowAjaxHandlerAction"
        validate="false"
		scope="request">
        </action>
        
        <action path="/RecentQueriesAjaxHandler" 
        type="edu.wustl.query.action.RecentQueriesAjaxHandlerAction"
        validate="false"
		scope="request">
        </action>
        
        <action path="/WorkflowSearch"
		    type="edu.wustl.common.action.CommonSearchAction"
			name="workflowForm"
			validate="false"
			scope="request">
			<forward name="pageOfWorkflow" path="/QueryWorkflowWizard.do?operation=edit&amp;pageOf=pageOfWorkflow"/>
			<forward name="failure" path="/QueryWorkflowWizard.do?operation=edit&amp;pageOf=pageOfWorkflow"/>
		</action>
		
		<action path="/WorkflowSearchAuthorized"
		    type="edu.wustl.query.action.WorkflowCommonSearchAction"
			name="workflowForm"
			validate="false"
			scope="request">
			<forward name="pageOfWorkflow" path="/QueryWorkflowWizard.do?operation=edit&amp;pageOf=pageOfWorkflow"/>
			<forward name="failure" path="/QueryWorkflowWizard.do?operation=edit&amp;pageOf=pageOfWorkflow"/>
		</action>
		
		<action path="/RetrieveWorkflowAction"
			type="edu.wustl.query.action.RetrieveWorkflowAction"
			validate="false"
			name="workflowForm"
			scope="request">
			<forward name="dashboardWorkflowList" path=".query.workflowViewPageDef"/>
			<forward name="mainMenuWorkflowList" path=".query.workflowList"/>
			<forward name="failure" path=".query.errorPageDef"/>
		</action>
        <!-- TO DO  -->
      <action path="/QuerySearchWizard" 
        type="edu.wustl.query.action.QueryAction">
        	<forward name="success" path=".query.querySearchWizardDef"/>
        </action>
		
		  <action path="/RedirectToWorkflow"
			type="edu.wustl.query.action.RedirectToWorkflowAction"
			name="workflowForm"
			validate="false"
			scope="request">
			<forward name="queryWizard" path="/WorkflowSearch.do?operation=edit&amp;pageOf=pageOfWorkflow&amp;menuSelected=1" />
		</action>
		
		<action path="/ShowResetCountPopUp"
          type = "edu.wustl.query.action.ShowResetCountPopUpAction"
          validate="false"
		  scope="request">
            <forward name="success"  path=".query.resetCountPopUp" />
        </action>
        
        		
		<action path="/DeleteQueryPopup"
          type = "edu.wustl.query.action.ShowResetCountPopUpAction"
          validate="false"
		  scope="request">
            <forward name="success"  path=".query.deleteQueryPopUp" />
        </action>
        
        
        <action path="/RetrieveRecentQueries"
			type="edu.wustl.query.action.RetrieveRecentQueriesAction"
			name="showRetrieveRecentForm"
			validate="false"
			scope="request">
			<forward name="forDashboard" path=".query.forDasboardrecentQueryListDef"/>
			<forward name="forMainMenu" path=".query.recentQueryListDef"/>
		</action>
		
		<action path="/LoadQueryPage"
			type="edu.wustl.query.action.LoadQueryPageAction"
			validate="false"
			scope="request">
			<forward name="queryWizard" path="/QueryWizard.do?operation=add&amp;pageOf=workflow&amp;menuSelected=1" />
			<forward name="queryGetCount" path="/QueryGetCount.do?operation=add&amp;pageOf=workflow&amp;menuSelected=1" />
		</action>
		
		<action path="/QueryResultsView" 
        	type="edu.wustl.query.action.ViewResultsAction"
            name="categorySearchForm"
            validate="false"
            scope="request" >
		  <forward name="success" path=".query.viewSearchResults"/>
        </action>
        
        <action path="/UpdateTreeView" 
        	type="edu.wustl.query.action.UpdateResultsViewTreeAction"
            validate="false"
			scope="request" >
        </action>
        
        <action path="/ExecuteQuery" 
        	type="edu.wustl.query.action.ExecuteQueryAction"
            name="saveQueryForm"
            validate="false"
			scope="request" >
			<!-- This is correct mapping  -->
			<forward name="showParameterizedPage" path=".query.collectQueryParameter" />
			<forward name="showParameterizedPopUp" path=".query.paramQueriesDef" />
			<forward name="notParameterized" path=".query.not.paramQueriesDef" />
        </action>
        
        <action path="/EditQuery" 
        	type="edu.wustl.query.action.EditQueryAction"
        	name="saveQueryForm"
            validate="false"
			scope="request" >
			<forward name="failure" path="/RetrieveQueryAction.do"/>
			<forward name="editDataQuery" path="/SearchCategory.do" />
			<forward name="editCountQuery" path="/QueryGetCount.do" />
        </action>
        
            
        <action path="/WorkflowTemplate" 
        	type="edu.wustl.query.action.WorkflowTemplateAction"
        	name="workflowForm"
            validate="false"
			scope="request" >
			<forward name="failure" path="/QueryWorkflowWizard.do"/>
			<forward name="success" path="/QueryWorkflowWizard.do" />
        </action>
        
        
        <!-- This action is added for updating IQuery with parameterized conditions   -->
        <action path="/UpdateQueryAction"
			type="edu.wustl.query.action.UpdateParameterizedConditionsAction"
			name="saveQueryForm"
			validate="false"
			scope="request">
         </action>
         
        <action path="/ShowParamQueryAttributes" 
        	type="edu.wustl.query.action.ShowParamQueryAttributesAction"
            validate="false"
			scope="request" >
        </action>
         
       <action path="/RetrieveParamQueries" 
        	type="edu.wustl.query.action.RetrieveParamQueriesAction"
            validate="false"
			scope="request" >
			<!--<forward name="success" path="/ExecutePQsInWorkflow.do"/> -->
        </action>
        
       <action path="/ExecutePQsInWorkflow" 
        	type="edu.wustl.query.action.ExecutePQsInWorkflowAction"
            validate="false"
			scope="request" >
		<!-- 	<forward name="success" path=".query.paramQueriesDef"/> -->
        </action>
        
        <action path="/LoadingParameters"
			type="edu.wustl.query.action.LoadingParametrsAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path="/pages/advancequery/content/search/querysuite/LoadingParameters.jsp"/>
		</action>
        
        <action path="/UpdatePQForWorkflow" 
        	type="edu.wustl.query.action.UpdatePQForWorkflowAction"
            validate="false"
			scope="request" >
			<forward name="success" path=".query.paramQueriesDef"/>
        </action>
        <action path="/Category"
			type="edu.wustl.query.action.CategoryAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
			<forward name="success" path=".query.searchCategory"/>
		</action>
		<action path="/SearchEntity"
			type="edu.wustl.query.action.SearchEntityAction"
			name="categorySearchForm"
			validate="false"
			scope="request">
		</action>
                
        <action path="/ParamerizedQueryPopUp" 
        	type="edu.wustl.query.action.ParamerizedQueryPopUpAction"
            validate="false"
			scope="request" >
			<forward name="success" path=".query.paramQueriesDef"/>
        </action>
        
          <action path="/SaveAsQuery" 
        	type="edu.wustl.query.action.SaveAsQueryAction"
            validate="false"
			scope="request" >
        </action>
        
        
            <action path="/ExecuteDataPQ" 
        	type="edu.wustl.query.action.ExecuteDataPQsAction"
            validate="false"
			scope="request" 
			name="saveQueryForm">
			<!-- <forward name="success" path=".query.paramQueriesDef"/>
			<forward name="execute" path="/QueryResultsView.do"/> -->
        </action> 
        <action path="/ValidateQueryTitle" 
        	type="edu.wustl.query.action.ValidateQueryTitleAjaxHandlerAction"
            validate="false"
			scope="request" >
        </action> 
	</action-mappings>
	
	<controller processorClass="edu.wustl.common.struts.ApplicationRequestProcessor" />
	
	<message-resources parameter="ApplicationResources" />
	
	<plug-in className="org.apache.struts.tiles.TilesPlugin" >
		<set-property property="definitions-config"
		value="/WEB-INF/AdvanceQuery-tiles-defs.xml" />
		<set-property property="moduleAware" value="true" />
		<set-property property="definitions-parser-validate" value="true" />
	</plug-in>
</struts-config>
