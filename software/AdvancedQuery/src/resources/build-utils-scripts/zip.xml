<project name="Zip-AdvancedQuery" description="Zips the AdavancedQuery artifacts">

<target name="zip:init">
		<delete dir="${build.dir}/zip" />
		<mkdir dir="${build.dir}/zip" />
	</target>

	<target name="zip:jar" depends="jar">
		<copy file="${build.dir}/${jar.name}" todir="${zip.dir}" overwrite="true" />
	</target>
	<!--
		================================= 
		target: zip
		=================================
	-->
	<target name="zip" depends="zip:init,zip:jar,zip:resources,zip:web-source" description="Zips all the artifacts required for application distribution.">
		<zip destfile="${build.dir}/${zip.name}" basedir="${zip.dir}" />
		<delete dir="${zip.dir}" />
	</target>
	<target name="zip:resources">
		<mkdir dir="${zip.dir}/resources" />
		<antcall target="zip:configurations" />
		<antcall target="zip:database-scripts" />
	</target>
	<target name="zip:web-source">
		<copy todir="${zip.dir}/web" overwrite="true">
			<fileset dir="${web.src.dir}" />
		</copy>
	</target>
	<target name="zip:configurations">
		<mkdir dir="${zip.dir}/resources/config" />
		<antcall target="zip:copy-app-conf" />
		<antcall target="zip:copy-hibernate-conf" />
		<antcall target="zip:copy-dao-conf" />
		<antcall target="zip:copy-jboss-conf" />
		<antcall target="zip:copy-csm-conf" />
		<antcall target="zip:copy-web-conf" />
		<antcall target="zip:copy-struts-conf" />
	</target>
	<target name="zip:database-scripts">
		<copy todir="${zip.dir}/resources/db">
			<fileset dir="${base.dir}/db">
				<include name="**" />
			</fileset>
		</copy>
	</target>

	<target name="zip:copy-app-conf">
		<copy todir="${zip.dir}/resources/config/app-conf" overwrite="true">
			<fileset dir="${app.conf.dir}" />
		</copy>
	</target>
	<target name="zip:copy-hibernate-conf">
		<copy todir="${zip.dir}/resources/config/hibernate-conf" overwrite="true">
			<fileset dir="${hibernate.conf.dir}" />
		</copy>
	</target>
	<target name="zip:copy-dao-conf">
		<copy todir="${zip.dir}/resources/config/DAO-conf" overwrite="true">
			<fileset dir="${dao.conf.dir}" />
		</copy>
	</target>
	<target name="zip:copy-jboss-conf">
		<copy todir="${zip.dir}/resources/config/jboss-conf" overwrite="true">
			<fileset dir="${jboss.conf.dir}" />
		</copy>
	</target>
	<target name="zip:copy-csm-conf">
		<copy todir="${zip.dir}/resources/config/csm-conf" overwrite="true">
			<fileset dir="${csm.conf.dir}" />
		</copy>
	</target>
	<target name="zip:copy-web-conf">
		<copy todir="${zip.dir}/resources/config/web-conf" overwrite="true">
			<fileset dir="${web.conf.dir}" />
		</copy>
	</target>
	<target name="zip:copy-struts-conf">
		<copy todir="${zip.dir}/resources/config/struts-conf" overwrite="true">
			<fileset dir="${struts.conf.dir}" />
		</copy>
	</target>
</project>