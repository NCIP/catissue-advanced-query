<?xml version ="1.0"?>
<project name="AdvanceQuery" default="run_nightly_build">
	<property name="hudson_home" value="/home/Hudson_Home" />
	<property name="temp_home" value="${hudson_home}/internal_conf" />
	<property name="workspace_home" value="${hudson_home}/workspace" />
	<property name="AQ_home" value="${hudson_home}/workspace/AdvancedQuery/sourcecode" />
	<property name="BPP_home" value="${hudson_home}/workspace/AdvancedQuery/build_plus_plus/" />
	<target name="run_nightly_build">
		<ant dir="${AQ_home}" inheritAll="false" antfile="build.xml" target="run_javacc">
		</ant>
		<ant dir="${AQ_home}" inheritAll="false" antfile="build.xml" target="create_zip">
		</ant>
		<antcall target="copy_AQ.prop" />
		<ant dir="${BPP_home}/scripts" inheritAll="false" antfile="build.xml" target="build">
				</ant>
		<antcall target="copy_queryInstall" />
		<!--ant dir="${AQ_home}" inheritAll="true" antfile="build.xml" target="generate_codecoverage_report">
		</ant-->
	</target>


	<target name="copy_AQ.prop">
		<copy file="${temp_home}/advancedquery/default.properties" todir="${BPP_home}/usersettings" overwrite="true" />
		<copy file="${temp_home}/advancedquery/tools.properties" todir="${BPP_home}/usersettings" overwrite="true" />
	</target>


	<target name="copy_queryInstall">
		<copy file="${temp_home}/queryInstall.properties" todir="${AQ_home}" overwrite="true" />
	</target>
	<target name="copy_framework_xml">
		<copy file="${temp_home}/FrameWork.xml" todir="${AQ_home}/WEB-INF/src/" overwrite="true" />
	</target>
	<target name="copy_framework_test_case">
		<copy file="${temp_home}/QueryFrameworkTestCase.java" todir="${AQ_home}/WEB-INF/test/edu/wustl/query/bizlogic/" overwrite="true" />
	</target>
	<target name="copy_asynchronous_queries_test_case">
		<copy file="${temp_home}/ASynchronousQueriesTestCases.java" todir="${AQ_home}/WEB-INF/test/edu/wustl/query/bizlogic/" overwrite="true" />
	</target>


</project>